<% if (threads.length> 0) { %>
    <% for (let thread of threads) { %>
        <div class="card thread-card mb-4 shadow-sm rounded-4 w-100">
            <div class="card-body d-flex flex-column flex-md-row align-items-start gap-4">

                <!-- User Info -->
                <div class="d-flex flex-column align-items-center" style="min-width: 80px;">


                    <%if(thread.author.profilePicture){ %>
                        <img src="<%=thread.author.profilePicture?.pfp%>" alt="Thread Author Profile Picture"
                            class="rounded-circle mb-2" width="60" height="60">
                        <%} else {%>
                            <!-- Avatar placeholder -->
                            <div class="avatar-circle d-none d-sm-flex align-items-center justify-content-center"
                                style="width: 3rem; height: 3rem;">
                                <span class="text-white">
                                    <%= thread.author.username.charAt(0).toUpperCase() %>
                                </span>
                            </div>
                            <%}%>


                                <small class="card-username">
                                    <a href="/users/<%= thread.author._id %>" class="fw-semibold text-decoration-none">
                                        @<%= thread.author.username %>
                                    </a>
                                </small>
                </div>

                <!-- Thread Content -->
                <div class="flex-grow-1">
                    <h5 class="fw-bold mb-2">
                        <a href="/forum/<%= thread._id %>" class="text-decoration-none hover-underline thread-title">
                            <%= thread.title %>
                        </a>
                    </h5>
                    <p class="text-muted thread-body-preview mb-3">
                        <%= thread.body.length> 300 ? thread.body.substring(0, 300) + '...' : thread.body %>
                    </p>
                    <a href="/forum/<%= thread._id %>" class="btn btn-view btn-sm">View</a>
                </div>

            </div>
        </div>
        <% } %>
            <% } else { %>
                <h3>No Questions.</h3>
                <% } %>